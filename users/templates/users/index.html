{% extends "base.html" %}
{% load form_errors %}

{% block title %}{{ user.username }}{% endblock %}

{% block content %}

{% if note %}
<div class='box'>
    {{ note }}
</div>
{% endif %}

<div class='box title'>
    Account Settings
</div>

<div class='box'>
    <form action='{% url "user:logout" %}' method='POST'>
        {% csrf_token %}
        <input type='submit' value='Log Out'/>
    </form>
</div>

{% form_errors settings_form %}
<div class='box'>
    <form method='POST' action='{% url "user:home" %}'>
        {% csrf_token %}
        <label>Theme: {{ settings_form.theme }}</label><br/>
        <label>Invalid URL Handling: {{ settings_form.url_settings }}</label><br/>
        <label>Opt out of anonymous usage tracking: {{ settings_form.no_analytics }}</label><br/>
        <input type='submit' value='Update Settings'/>
    </form>
</div>

{% if not user.settings.is_trial %}
    {% form_errors pass_form %}
    <div class='box'>
        <form method='POST' action='{% url "user:pass_change" %}'>
            {% csrf_token %}
            Change Password:<br/>
            <label>Old Password: {{ pass_form.old_password }}</label><br/>
            <label>New Password: {{ pass_form.new_password1 }}</label><br/>
            <label>Type it Again: {{ pass_form.new_password2 }}</label><br/>
            <input type='submit' value='Change Password'/>
        </form>
    </div>
{% endif %}

<div class='box title'>
    Import and Export
</div>

<div class='box'>
    Please note that if you export your bookmarks and then import them again, "implies" relationships between tags
    won't be preserved.
</div>

{% form_errors importForm %}
<div class='box'>
    <form enctype='multipart/form-data' action='{% url "user:import" %}' method='POST'>
        {% csrf_token %}
        <label>{{ importForm.use_tags }} Include tags on import if they are available</label><br/>
        {{ importForm.file }}<br/>
        <input type='submit' value='Import Bookmarks From HTML'/>
    </form>
</div>

<div class='box'>
    <button><a href='{% url "bookmarks:export" %}' style='color:inherit'>Export Bookmarks To HTML</a></button>
</div>

{% endblock %}
